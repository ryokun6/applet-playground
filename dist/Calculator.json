{
  "content": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  \n  <link rel=\"stylesheet\" href=\"/fonts/fonts.css\">\n  <!-- ts=1762372277920 --> \n  \n  <script type=\"module\" src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/0.174.0/three.module.min.js\"></script>\n  <script src=\"https://cdn.tailwindcss.com/3.4.16\"></script>\n  <script>\n    tailwind.config = {\n      theme: {\n        extend: {\n          fontFamily: {\n            sans: [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"sans-serif\"],\n            mono: [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"ui-monospace\", \"SFMono-Regular\", \"Menlo\", \"Monaco\", \"Consolas\", \"Liberation Mono\", \"Courier New\", \"monospace\"],\n            serif: [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"SerenityOS-Emoji\", \"serif\"],\n            emoji: [\"SerenityOS-Emoji\", \"AppleColorEmoji\", \"AppleColorEmojiFallback\"],\n            'geneva': [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"system-ui\", \"-apple-system\", \"sans-serif\"],\n            'mondwest': [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"serif\"],\n            'neuebit': [\"NeueBit\", \"ArkPixel\", \"SerenityOS-Emoji\", \"Helvetica\", \"Arial\", \"Hiragino Sans\", \"sans-serif\"],\n            'monaco': [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"monospace\"],\n            'jacquard': [\"Jacquard\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"serif\"]\n          }\n        }\n      }\n    }\n  </script>\n  <style>\n    * {\n      box-sizing: border-box;\n      \n    }\n    html, body {\n      margin: 0;\n      overflow-x: auto; /* Allow horizontal scroll if content overflows */\n      width: 100%;\n      height: 100%;\n      max-width: 100%; /* Prevent body from exceeding viewport width */\n      \n    }\n    \n    /* Ensure pre doesn't break layout */\n    pre {\n      white-space: pre-wrap; /* Allow wrapping */\n      word-break: break-all; /* Break long words */\n    }\n  </style>\n  \n  <!-- Move click interceptor script to head for earlier execution -->\n  <script>\n    document.addEventListener('DOMContentLoaded', function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click:', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    });\n    \n    // Also add immediate execution version for documents that load quickly\n    // This helps ensure we don't miss any clicks during initial page load\n    (function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click (immediate handler):', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    })();\n  </script>\n \n</head>\n<body>\n  <div class=\"w-full h-screen bg-neutral-100 font-geneva flex flex-col overflow-hidden\">\n  <div class=\"flex-1 flex items-end justify-end p-4 pr-6 sm:p-6 sm:pr-8 min-h-0\">\n    <div id=\"display\" class=\"text-black text-7xl font-light text-right transition-all duration-200 leading-tight\">0</div>\n  </div>\n  \n  <div class=\"p-3 sm:p-4 pb-4 sm:pb-8 grid grid-cols-4 gap-2 sm:gap-3\">\n    <button class=\"btn bg-neutral-300 text-black\" data-action=\"backspace\">âŒ«</button>\n    <button class=\"btn bg-neutral-300 text-black\" data-action=\"clear\">AC</button>\n    <button class=\"btn bg-neutral-300 text-black\" data-action=\"percent\">%</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"divide\">Ã·</button>\n    \n    <button class=\"btn bg-white text-black\" data-num=\"7\">7</button>\n    <button class=\"btn bg-white text-black\" data-num=\"8\">8</button>\n    <button class=\"btn bg-white text-black\" data-num=\"9\">9</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"multiply\">Ã—</button>\n    \n    <button class=\"btn bg-white text-black\" data-num=\"4\">4</button>\n    <button class=\"btn bg-white text-black\" data-num=\"5\">5</button>\n    <button class=\"btn bg-white text-black\" data-num=\"6\">6</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"subtract\">âˆ’</button>\n    \n    <button class=\"btn bg-white text-black\" data-num=\"1\">1</button>\n    <button class=\"btn bg-white text-black\" data-num=\"2\">2</button>\n    <button class=\"btn bg-white text-black\" data-num=\"3\">3</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"add\">+</button>\n    \n    <button class=\"btn bg-white text-black\" data-action=\"negate\">+/âˆ’</button>\n    <button class=\"btn bg-white text-black\" data-num=\"0\">0</button>\n    <button class=\"btn bg-white text-black\" data-action=\"decimal\">.</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"equals\">=</button>\n  </div>\n</div>\n\n<style>\n.btn {\n  aspect-ratio: 1;\n  border-radius: 50%;\n  font-size: 1.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.15s ease;\n  cursor: pointer;\n  border: none;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  transform: scale(1);\n  -webkit-tap-highlight-color: transparent;\n  touch-action: manipulation;\n  min-height: 0;\n}\n.btn:active {\n  transform: scale(0.92);\n  box-shadow: 0 0 1px rgba(0,0,0,0.2);\n}\n.btn.pressed {\n  transform: scale(0.92);\n  box-shadow: 0 0 1px rgba(0,0,0,0.2);\n}\n@media (min-width: 640px) {\n  .btn {\n    font-size: 2rem;\n  }\n}\n</style>\n\n<script>\nconst display = document.getElementById('display');\n\nlet current = '0';\nlet prev = null;\nlet op = null;\nlet reset = false;\n\nfunction speak(text) {\n  if ('speechSynthesis' in window) {\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.rate = 1.1;\n    utterance.pitch = 1;\n    speechSynthesis.cancel();\n    speechSynthesis.speak(utterance);\n  }\n}\n\nfunction updateDisplay() {\n  display.textContent = current;\n  \n  const len = current.length;\n  if (len <= 4) {\n    display.className = 'text-black text-7xl font-light text-right transition-all duration-200 leading-tight';\n  } else if (len <= 6) {\n    display.className = 'text-black text-6xl font-light text-right transition-all duration-200 leading-tight';\n  } else if (len <= 8) {\n    display.className = 'text-black text-5xl font-light text-right transition-all duration-200 leading-tight';\n  } else if (len <= 10) {\n    display.className = 'text-black text-4xl font-light text-right transition-all duration-200 leading-tight';\n  } else if (len <= 12) {\n    display.className = 'text-black text-3xl font-light text-right transition-all duration-200 leading-tight';\n  } else if (len <= 15) {\n    display.className = 'text-black text-2xl font-light text-right transition-all duration-200 leading-tight';\n  } else {\n    display.className = 'text-black text-xl font-light text-right transition-all duration-200 leading-tight';\n  }\n}\n\nfunction clear() {\n  current = '0';\n  prev = null;\n  op = null;\n  reset = false;\n  speak('cleared');\n}\n\nfunction backspace() {\n  if (current.length > 1) {\n    current = current.slice(0, -1);\n  } else {\n    current = '0';\n  }\n  speak('delete');\n}\n\nfunction appendNum(num) {\n  if (reset) {\n    current = num;\n    reset = false;\n  } else {\n    current = current === '0' ? num : current + num;\n  }\n  speak(num);\n}\n\nfunction appendDecimal() {\n  if (reset) {\n    current = '0.';\n    reset = false;\n  } else if (!current.includes('.')) {\n    current += '.';\n  }\n  speak('point');\n}\n\nfunction negate() {\n  current = String(parseFloat(current) * -1);\n  speak('negative ' + current);\n}\n\nfunction percent() {\n  current = String(parseFloat(current) / 100);\n  speak(current);\n}\n\nfunction setOp(o) {\n  if (op && !reset) {\n    calculate();\n  }\n  prev = current;\n  op = o;\n  reset = true;\n  \n  const opNames = {\n    'add': 'plus',\n    'subtract': 'minus',\n    'multiply': 'times',\n    'divide': 'divided by'\n  };\n  speak(opNames[o]);\n}\n\nfunction calculate() {\n  if (!prev || !op) return;\n  \n  const a = parseFloat(prev);\n  const b = parseFloat(current);\n  let result = 0;\n  \n  switch(op) {\n    case 'add': result = a + b; break;\n    case 'subtract': result = a - b; break;\n    case 'multiply': result = a * b; break;\n    case 'divide': result = b !== 0 ? a / b : 0; break;\n  }\n  \n  current = String(result);\n  prev = null;\n  op = null;\n  reset = true;\n  \n  speak('equals ' + current);\n}\n\ndocument.querySelectorAll('.btn').forEach(btn => {\n  btn.addEventListener('touchstart', (e) => {\n    e.preventDefault();\n    btn.classList.add('pressed');\n  });\n  \n  btn.addEventListener('touchend', (e) => {\n    e.preventDefault();\n    btn.classList.remove('pressed');\n    \n    const num = btn.dataset.num;\n    const action = btn.dataset.action;\n    \n    if (num !== undefined) {\n      appendNum(num);\n    } else if (action === 'clear') {\n      clear();\n    } else if (action === 'backspace') {\n      backspace();\n    } else if (action === 'decimal') {\n      appendDecimal();\n    } else if (action === 'negate') {\n      negate();\n    } else if (action === 'percent') {\n      percent();\n    } else if (action === 'equals') {\n      calculate();\n    } else if (action) {\n      setOp(action);\n    }\n    \n    updateDisplay();\n  });\n  \n  btn.addEventListener('touchcancel', () => {\n    btn.classList.remove('pressed');\n  });\n  \n  btn.addEventListener('click', () => {\n    const num = btn.dataset.num;\n    const action = btn.dataset.action;\n    \n    if (num !== undefined) {\n      appendNum(num);\n    } else if (action === 'clear') {\n      clear();\n    } else if (action === 'backspace') {\n      backspace();\n    } else if (action === 'decimal') {\n      appendDecimal();\n    } else if (action === 'negate') {\n      negate();\n    } else if (action === 'percent') {\n      percent();\n    } else if (action === 'equals') {\n      calculate();\n    } else if (action) {\n      setOp(action);\n    }\n    \n    updateDisplay();\n  });\n});\n</script>\n</body>\n</html>",
  "title": "Untitled",
  "icon": "ðŸ”¢",
  "name": "Calculator.app",
  "windowWidth": 420,
  "windowHeight": 625,
  "createdAt": 1763140502556,
  "createdBy": "ryo",
  "updatedAt": 1763140502556,
  "featured": true
}